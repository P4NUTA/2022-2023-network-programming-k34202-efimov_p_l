University: ITMO University  
Faculty: FICT  
Course: Network programming  
Year: 2022  
Group: K34202  
Author: Efimov Pavel Leonidovich  
Lab: Lab4  
Date of create: 18.12.2022  
Date of finished: 

Цель работы: Изучить синтаксис языка программирования P4 и выполнить 2 задания обучающих задания от Open network foundation для ознакомления на практике с P4.

Ход работы:

1. Был склонирован репозиторий и поднята виртуальная машина с помощью Vagrant
2. Был выполнен вход в аккаунт и запущена команда с `make build && make run`
3. Проверена работа mininet

![img.png](img.png)

4. Добавляем недостающий код в файл basic.p4
5. Добавляем в парсер заголовки ethernet_t, ipv4_t

![img_1.png](img_1.png)

6. Изменены адреса получателя и отправителя, уменьшен ttl и определяем выходной порт.

![img_2.png](img_2.png)

7. Добавляем валидацию на корректность заголовка ipv4.

![img_3.png](img_3.png)

8. Добавляем депарсер пакетов.

![img_4.png](img_4.png)

9. Проверяем работу всех изменений. Все сработало успешно.

![img_5.png](img_5.png)

10. Нарисована схема сети basic.p4

![img_6.png](img_6.png)

11. Изменяем код в файле basic_tunnel.p4
12. Реализован парсер MyTunnel, добавлено заполнение заголовка 

![img_7.png](img_7.png)

13. Определена функция myTunnel_forward, указан порт в метадате.

![img_8.png](img_8.png)

14. Определена таблица myTunnel_exact

![img_9.png](img_9.png)

15. Изменена валидация пакетов, отправленных через туннель

![img_10.png](img_10.png)

16. Добавлен депарсер для туннелей

![img_11.png](img_11.png)

17. Отправлен запрос и проверена работа программы

![img_12.png](img_12.png)

18. Нарисована схема сети

![img_13.png](img_13.png)


Выводы:
В ходе выполнения лабораторной работы был изучен синтаксис языка программирования P4 и выполнены 2 задания обучающих задания от Open network foundation для ознакомления на практике с P4.
